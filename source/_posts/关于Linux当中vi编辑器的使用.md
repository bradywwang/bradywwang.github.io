---
title: 关于Linux当中vi编辑器的使用
date: 2014-12-15 13:12:35
tags: linux
---

自己初识Linux的时候，用的还是Ubuntu中自带的gedit编辑器。原来曾经听说过Linux当中其实也有emacs以及vi这种的工具，可是真心用不习惯。明天就要考Linux了，自己趁这个机会来深入了解一下Linux里面的编辑器，简要学习一下vi的命令。
初识VI，因为自己什么也都不懂，刚开始的时候还以为和word一样，曾经尝试过用鼠标去乱点，尝试像word一样能够选中一段文字然后拖动，或者是可以直接点选就可以完成复制粘贴，插入删除。可是事实证明，其实我错了。vi仅仅是一个针对于命令行的文本编辑器，它强大的功能也完全通过命令行来操作，我们可以仅仅依靠命令行就可以实现利用vi编辑器完成段落、文字的复制粘贴、修改删除等等工作，但是命令太多，但是我今天也就静下心来学习一下vi中一些经常用到的模式。
我们都众所周知，vi一共有三个模式，分别是插入模式，命令行模式以及底行模式。插入模式，就是我们平常用到的模式，我们一般通过它来完成对文档的编辑工作。而命令行模式和底行模式，一般实现的就是通过命令的方式对文档进行控制，实现文档的增删改查工作等目的。
首先要说的就是插入模式，插入模式其实没有什么要多说的，其实也就是在命令行模式之后按i键就可以进入，没有太多可以说的。
然后就是命令行模式。在vi中由两种命令控制模式，一种是命令行模式，也就是在编辑模式之后按ESC键退出之后直接输入的就是命令行模式，另外一种就是底行魔兽。我们可以在命令行模式之下按分号进入底行模式，然后就可以执行底行命令模式了。对于命令行模式和底行模式的区别我个人感觉在于命令行模式是针对于文件内容来说的，我们可以通过命令行模式来对文件进行增删改查操作。但是底行模式就是针对于文件本身来说的，一般就是控制文件保存、文件行号的控制等等，下面就简单列举一些常用的vi命令行模式以及底行模式的一些命令。

#### 命令行模式

- h 光标左移一个字符
- l 光标右移一个字符
- Space 光标右移一个字符
- Backspace 光标左移一个字符
- k或者Ctrl+p 光标上移一行
- j或者Ctrl+n 光标下移一行
- Enter 光标下移一行
- Ctrl+b 屏幕向后翻动一页
- Ctrl+f 屏幕向前翻动一页
- Ctrl+u 屏幕向后翻动半页
- Ctrl+d 屏幕向前翻动半页
- nz 将第n行滚至屏幕顶部，不指定n时将当前行滚至屏幕顶部
- 0 移动到当前行的开头
- $ 移动到当前行的行尾
- G 移动到文章的最后
- w 跳到下一个字的开头
- e 跳到下一个字的字尾
- b 跳到上一个子的开头
- ） 光标移至句尾
- （ 光标移至句首
- } 光标移至段落开头
- { 光标移至段落结尾
- nG 光标后移n个位置
- n+ 光标下移n行
- n- 光标上移n行
- n$ 光标移至第n行尾
- H 光标移至屏幕顶行
- M 光标移至屏幕中间行
- L 光标移至屏幕最后行
- i 在光标前插入文本
- I 在当前行首插入文本
- a 光标后插入文本
- A 当前行尾插入文本
- o 当前行之下新开一行
- O 当前行之上新开一行
- r 替换当前字符
- R 替换当前字符及其后的字符，直至按ESC键
- s 从当前光标位置处开始，以输入的文本的替代指定数目的字符
- S 删除制定数目的行，并以所输入文本代替之
- ncw/nCW 修改指定数目的字
- nCC 修改指定数目的行
- ndw 删除光标开始处后的n-1各字
- do 删至行首
- d$ 删至行尾
- ndd 删除当前行及其后n-1行
- x/X 删除一个字符，x删除光标后的，X删除光标前的
- Ctrl+u 删除输入方式下所输入的文本

#### 搜索及替换命令

- /pattern 从光标开始处向文件尾搜索pattern
- ？pattern 从光标开始处向文件首搜索pattern
- n 在同一方向重复上一次搜索命令
- N 在反方向上重复上一次搜索命令
- ：s/p1/p2/g 将当前行中的所有的p1均用p2替代
- ：n1,n2s/p1/p2/g 将第n1至n2行中所有p1均用p2替代
- ：g/p1/s//p2/g:将文件中所有p1均用p2替换

#### 最后行命令方式

- ：n1,n2 con n3：将n1到n2行之间的内容拷贝到第n3行下
- ：n1,n2 m n3 :将n1行到n2行之间的内容移至第n3行下
- ：n1，n2 d 将n1到n2行之间的内容删除
- ：w 保存当前文件
- e filename打开文件进行编辑
- x 保存当前文件并退出
- q 退出vi
- q！ 不保存文件直接退出
- ！command 执行shell命令command
- n1,n2 w!command 将文件中n1行至n2行的内容作为command的输入并执行之，若不能指定n1，n2，则表示将整个文件作为command的输入
- r！command 将命令command的输出结果放到当前行

#### 寄存器（剪贴板）相关操作

- ?nyy 将当前行及其下n行的内容保存到寄存器？中，其中？为一个字母，n为一个数字
- ？nyw 将当前行及其下n个字保存到寄存器？中，其中？为一个字母，n为一个数字
- ？nyl：将当前行及其下n个字符保存到寄存器？中
- ？p：取出寄存器？中的内容并将其放到光标位置处
- ndd：将当前行及其下共n行文本删除，并将所删内容放到1号删除寄存器中